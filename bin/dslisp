#!/usr/bin/env ruby
require "dslisprb"

dslisp = DsLisp.new
if ARGV[1]
 # execute and exit
  p dslisp.evaluate(ARGV[1])
else
  # repl
  print "enter lisp commands or quit to exit\n"

  while (1)
    print "> "
    cmd = readline

    if cmd.chop == "quit"
      exit
    end

    begin
      print dslisp.evaluate(cmd.chop).lisp_inspect,"\n"
    rescue Exception => e
      p e
      print e.backtrace.join("\n"),"\n"
    end
  end
end
